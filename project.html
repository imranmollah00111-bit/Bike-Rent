<!DOCTYPE html>
<html>
<head>
<title>Cox's Bazar Bike Rent</title>

<style>
    body { font-family: Arial; margin: 0; background: white; }
    header { background: skyblue; color: white; text-align: center; padding: 15px; }

    .box {
        max-width: 350px; background: white; margin: 30px auto;
        padding: 20px; border-radius: 8px;
    }
    input, select {
        width: 100%; padding: 10px; margin-top: 10px;
        border: 1px solid whitesmoke; border-radius: 5px;
    }
    .btn {
        width: 100%; padding: 10px; background: #0b6fa4; color: white;
        border: none; border-radius: 5px; margin-top: 10px; cursor: pointer;
    }
    .btn:hover { background: #094f75; }
    .link { color: #0b6fa4; cursor: pointer; text-align: center; margin-top: 10px; }
    .hidden { display: none; }

    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    th { background: #0b6fa4; color: white; }
</style>

</head>
<body>

<header>
    <h2>Cox's Bazar Bike Rent</h2>
    <h4>Dolphine More</h4>
</header>


<div class="box" id="loginPage">
    <h3>Login</h3>
    <input id="loginUser" placeholder="Phone or Email or Admin">
    <input id="loginPass" type="password" placeholder="Password">

    <button class="btn" onclick="login()">Login</button>

    <div class="link" onclick="showSignup()">Create Account</div>
    <div class="link" onclick="showForgot()">Forgot Password?</div>
</div>


<div class="box hidden" id="signupPage">
    <h3>Create Account</h3>

    <input id="signUser" placeholder="Phone or Email">
    <input id="signPass" type="password" placeholder="Password (min 4 chars)">

    <button class="btn" onclick="signup()">Sign Up</button>

    <div class="link" onclick="backLogin()">Back to Login</div>
</div>


<div class="box hidden" id="forgotPage">
    <h3>Reset Password</h3>

    <input id="forgotUser" placeholder="Enter Phone or Email">

    <button class="btn" onclick="resetPass()">Send Reset Link</button>

    <div class="link" onclick="backLogin()">Back to Login</div>
</div>


<div class="box hidden" id="mainPage">
    <h3>Bike Rental Rules</h3>
    <ul>
        <li>NID + Driving License required</li>
        <li>Age must be 18+</li>
        <li>Security Money: 2000 TK</li>
        <li>Outside Cox's Bazar = 10,000 TK Fine</li>
        <li>Damage Fine = 5,000 TK</li>
        <li>Shop: Dolphin Moor, Cox's Bazar</li>
    </ul>

    <h4>Select Bike Model</h4>
    <select id="bikeModel">
        <option value="200">Standard Bike = 200 TK/hr</option>
        <option value="250">Scooter = 250 TK/hr</option>
        <option value="300">Gear Bike = 300 TK/hr</option>
    </select>

    <h4>Calculate Rent</h4>
    <input id="hours" type="number" placeholder="Enter hours">

    <button class="btn" onclick="calculateRent()">Calculate</button>

    <p id="rentText"></p>

    <div id="uploadBox" class="hidden">
        <h4>Upload Documents</h4>
        <input type="file" id="nidFile">
        <input type="file" id="dlFile">

        <button class="btn" onclick="submitDocs()">Submit</button>
    </div>

    <button class="btn" onclick="logout()" style="background:red;">Logout</button>
</div>


<div class="box hidden" id="confirmPage">
    <h2>Congratulations!</h2>
    <p>Your booking is confirmed.</p>

    <button class="btn" onclick="goMain()">Back to Main Page</button>
</div>


<div class="box hidden" id="adminPage">
    <h2>Admin Dashboard</h2>

    <p><b>Total App Users:</b> <span id="totalUsers">0</span></p>

    <h3>All Bookings</h3>
    <table>
        <tr>
            <th>User</th>
            <th>Bike</th>
            <th>Hours</th>
            <th>Rent</th>
            <th>Delete</th>
        </tr>
        <tbody id="bookingList"></tbody>
    </table>

    <button class="btn" onclick="adminLogout()" style="background:red;">Logout</button>
</div>

<script>

function showSignup(){ loginPage.classList.add("hidden"); signupPage.classList.remove("hidden"); }
function showForgot(){ loginPage.classList.add("hidden"); forgotPage.classList.remove("hidden"); }
function backLogin(){ signupPage.classList.add("hidden"); forgotPage.classList.add("hidden"); loginPage.classList.remove("hidden"); }


function signup() {
    if (signUser.value === "" || signPass.value.length < 4) {
        alert("Invalid input");
        return;
    }

    let users = JSON.parse(localStorage.getItem("users") || "[]");

    users.push({ user: signUser.value, pass: signPass.value });

    localStorage.setItem("users", JSON.stringify(users));

    alert("Account Created! Please Login.");
    backLogin();
}


function resetPass(){
    if(forgotUser.value===""){ alert("Enter Email or Phone"); return; }
    alert("Reset Link Sent (Demo)");
}


function login() {
    let u = loginUser.value;
    let p = loginPass.value;

  
    if (u === "admin" && p === "1234") {
        loginPage.classList.add("hidden");
        adminPage.classList.remove("hidden");
        loadAdmin();
        return;
    }


    let users = JSON.parse(localStorage.getItem("users") || "[]");
    let found = users.find(a => a.user === u && a.pass === p);

    if (found) {
        localStorage.setItem("currentUser", u);
        loginPage.classList.add("hidden");
        mainPage.classList.remove("hidden");
    } else {
        alert("Wrong Login Info!");
    }
}


function calculateRent() {
    if (hours.value <= 0) { alert("Enter valid hours"); return; }

    let total = hours.value * bikeModel.value;
    rentText.innerHTML = "Total Rent: " + total + " TK";
    uploadBox.classList.remove("hidden");
}


function submitDocs() {
    if (!nidFile.files.length || !dlFile.files.length) {
        alert("Upload both files");
        return;
    }

    let bookings = JSON.parse(localStorage.getItem("bookings") || "[]");

    bookings.push({
        user: localStorage.getItem("currentUser"),
        bike: bikeModel.options[bikeModel.selectedIndex].text,
        hours: hours.value,
        rent: hours.value * bikeModel.value
    });

    localStorage.setItem("bookings", JSON.stringify(bookings));

    mainPage.classList.add("hidden");
    confirmPage.classList.remove("hidden");
}


function goMain(){ confirmPage.classList.add("hidden"); mainPage.classList.remove("hidden"); }


function logout(){
    mainPage.classList.add("hidden");
    loginPage.classList.remove("hidden");
}


function loadAdmin() {
    let users = JSON.parse(localStorage.getItem("users") || "[]");
    let bookings = JSON.parse(localStorage.getItem("bookings") || "[]");

    totalUsers.innerHTML = users.length;

    bookingList.innerHTML = "";

    bookings.forEach((b, i)=>{
        bookingList.innerHTML += `
            <tr>
                <td>${b.user}</td>
                <td>${b.bike}</td>
                <td>${b.hours}</td>
                <td>${b.rent}</td>
                <td><button onclick="deleteBooking(${i})">X</button></td>
            </tr>
        `;
    });
}


function deleteBooking(index){
    let bookings = JSON.parse(localStorage.getItem("bookings") || "[]");
    bookings.splice(index,1);
    localStorage.setItem("bookings", JSON.stringify(bookings));
    loadAdmin();
}


function adminLogout(){
    adminPage.classList.add("hidden");
    loginPage.classList.remove("hidden");
}

</script>

</body>
</html>
